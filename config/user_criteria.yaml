# Sherlock-Homes Criteria Configuration
# Feed this to the PropertyMatcher for personalized scoring
# Last updated: 2026-01-18

user_id: "samay-kamya"
profile_name: "Dolores Heights Search"
active: true

# Hard filters (binary pass/fail before scoring)
hard_filters:
  price_max: 4000000
  bedrooms_min: 3
  bathrooms_min: 2
  sqft_min: 1600
  neighborhoods:
    - "Dolores Heights"
    - "Liberty Hill"
    - "Mission District"
    - "Valencia Corridor"
    - "Cole Valley"
    - "Haight-Ashbury"
    - "Duboce Triangle"

# Soft caps (penalty above, not disqualification)
soft_caps:
  price_soft: 2500000  # Ideal ceiling
  hoa_soft: 800        # Monthly, above this needs justification

# Weighted scoring criteria
weights:
  # Tier 1: Make or break (total: 57)
  natural_light: 15
  outdoor_space: 12
  character_soul: 10
  kitchen_quality: 10
  location_quiet: 10

  # Tier 2: Differentiate (total: 38)
  office_space: 8
  indoor_outdoor_flow: 8
  high_ceilings: 6
  layout_intelligence: 6
  move_in_ready: 5
  views: 5

  # Tier 3: Practical (total: 26)
  in_unit_laundry: 6
  parking: 6
  central_hvac: 4
  gas_stove: 4
  dishwasher: 3
  storage: 3

# NLP keyword scoring (boost/penalize based on description)
nlp_signals:
  positive:
    light:
      weight: 1.5
      keywords:
        - "sun-filled"
        - "natural light"
        - "bright"
        - "south-facing"
        - "corner unit"
        - "light-filled"
        - "sunny"
        - "morning light"
        - "afternoon sun"
        - "skylights"
        - "bay windows"
        - "oversized windows"

    character:
      weight: 1.3
      keywords:
        - "original details"
        - "period details"
        - "restored"
        - "preserved"
        - "crown molding"
        - "high ceilings"
        - "built-ins"
        - "hardwood floors"
        - "Victorian"
        - "Edwardian"
        - "craftsman"
        - "industrial"
        - "loft"
        - "one-of-a-kind"
        - "unique"
        - "character"

    outdoor:
      weight: 1.4
      keywords:
        - "private yard"
        - "outdoor space"
        - "deck"
        - "patio"
        - "garden"
        - "indoor-outdoor"
        - "entertaining"
        - "al fresco"

    kitchen:
      weight: 1.2
      keywords:
        - "chef's kitchen"
        - "gas range"
        - "open kitchen"
        - "renovated kitchen"
        - "island"
        - "breakfast bar"
        - "eat-in kitchen"

    quality:
      weight: 1.3
      keywords:
        - "architect-designed"
        - "custom"
        - "handmade"
        - "artisan"
        - "bespoke"
        - "thoughtfully"
        - "curated"

  negative:
    flipper:
      weight: 0.7
      keywords:
        - "completely renovated"
        - "newly renovated"
        - "move-in ready"  # context: if combined with generic description

    dark:
      weight: 0.6
      keywords:
        - "cozy"  # without "bright" context
        - "intimate"  # without light keywords
        - "charming"  # without light keywords

    condition:
      weight: 0.5
      keywords:
        - "bring your vision"
        - "handyman special"
        - "TLC needed"
        - "needs work"
        - "as-is"
        - "investor special"

    location_noise:
      weight: 0.7
      keywords:
        - "steps from bars"
        - "nightlife"
        - "vibrant street"
        - "bustling"

    weak_outdoor:
      weight: 0.8
      keywords:
        - "shared yard"
        - "common area"
        - "balcony"
        - "juliet balcony"

# Street-level scoring adjustments
location_modifiers:
  boost_streets:
    - "Liberty St"
    - "Sanchez St"
    - "Noe St"
    - "Guerrero St"  # quieter parallel
    - "Lexington St"

  penalize_streets:
    - "Valencia St"
    - "Mission St"
    - "Church St"
    - "Market St"
    - "Guerrero St"  # if near intersection with busy

  penalize_conditions:
    - first_floor_busy_street
    - adjacent_to_bar
    - on_major_thoroughfare

# Change tracking alerts
alerts:
  new_listing:
    score_threshold: 76  # 60% of max
    notify: immediate

  price_drop:
    percent_threshold: 5
    notify: immediate

  back_on_market:
    notify: immediate

  dom_stale:
    days: 45
    notify: daily_digest
    note: "Negotiation opportunity"

# Visual scoring preferences (for Claude Vision)
visual_preferences:
  boost:
    - "natural light visible in photos"
    - "outdoor space with greenery"
    - "open floor plan"
    - "high ceilings visible"
    - "original architectural details"
    - "warm materials (wood, brick)"

  penalize:
    - "all lights on during day (hiding darkness)"
    - "ultra-wide lens distortion"
    - "heavily staged with rental furniture"
    - "gray/beige color palette throughout"
    - "visible deferred maintenance"
    - "cramped room layouts"

# Explainability preferences
explain:
  top_positives: 3
  key_tradeoff: 1
  include_signals:
    - tranquility_score
    - light_potential
    - visual_quality
    - nlp_character_score
